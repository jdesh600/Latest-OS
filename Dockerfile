FROM redhat/ubi8 as base
RUN subscription-manager register --username=jdesh600 --password=Honey@600 \
&& subscription-manager attach --auto \
&& subscription-manager repos --enable codeready-builder-for-rhel-8-x86_64-rpms \
&& dnf install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm \
&& dnf clean all

RUN echo "Installing Redhat UBI system dependecies" \
&& dnf install -y binutils-2.30-113.el8.x86_64 \
  bzip2-devel-1.0.6-26.el8.x86_64 \
  cairo-1.15.12-6.el8.x86_64 \
  cpp-8.5.0-10.el8.x86_64 \
  dejavu-fonts-common-2.35-7.el8.noarch \
  dejavu-sans-fonts-2.35-7.el8.noarch \
  fontconfig-2.13.1-4.el8.x86_64 \
  fontpackages-filesystem-1.44-22.el8.noarch \
  freetype-2.9.1-4.el8_3.1.x86_64 \
  fribidi-1.0.4-8.el8.x86_64 \
  gcc-8.5.0-10.el8.x86_64 \
  gcc-c++-8.5.0-10.el8.x86_64 \
  gcc-gfortran-8.5.0-10.el8.x86_64 \
  glibc-devel-2.28-189.1.el8.x86_64 \
  glibc-headers-2.28-189.1.el8.x86_64 \
  graphite2-1.3.10-10.el8.x86_64 \
  harfbuzz-1.7.5-3.el8.x86_64 \
  isl-0.16.1-6.el8.x86_64 \
  jbigkit-libs-2.1-14.el8.x86_64 \
  kernel-headers-4.18.0-372.9.1.el8.x86_64 \
  libICE-1.0.9-15.el8.x86_64 \
  libSM-1.2.3-1.el8.x86_64 \
  libX11-1.6.8-5.el8.x86_64 \
  libX11-common-1.6.8-5.el8.noarch \
  libXau-1.0.9-3.el8.x86_64 \
  libXext-1.3.4-1.el8.x86_64 \
  libXft-2.3.3-1.el8.x86_64 \
  libXmu-1.1.3-1.el8.x86_64 \
  libXrender-0.9.10-7.el8.x86_64 \
  libXt-1.1.5-12.el8.x86_64 \
  libcurl-devel-7.61.1-22.el8.x86_64 \
  libdatrie-0.2.9-7.el8.x86_64 \
  libgfortran-8.5.0-10.el8.x86_64 \
  libgomp-8.5.0-10.el8.x86_64 \
  libicu-60.3-2.el8_1.x86_64 \
  libicu-devel-60.3-2.el8_1.x86_64 \
  libjpeg-turbo-1.5.3-12.el8.x86_64 \
  libmpc-1.1.0-9.1.el8.x86_64 \
  libpkgconf-1.4.2-1.el8.x86_64 \
  libpng-1.6.34-5.el8.x86_64 \
  libquadmath-8.5.0-10.el8.x86_64 \
  libquadmath-devel-8.5.0-10.el8.x86_64 \
  libquadmath-devel-8.5.0-10.el8.x86_64 \
  libstdc++-devel-8.5.0-10.el8.x86_64 \
  libthai-0.1.27-2.el8.x86_64 \
  libtiff-4.0.9-21.el8.x86_64 \
  libxcb-1.13.1-1.el8.x86_64 \
  libxcrypt-devel-4.1.1-6.el8.x86_64 \
  make-4.2.1-11.el8.x86_64 \
  openblas-threads-0.3.15-3.el8.x86_64 \
  pango-1.42.4-8.el8.x86_64 \
  pcre2-devel-10.32-2.el8.x86_64 \
  pcre2-utf16-10.32-2.el8.x86_64 \
  pcre2-utf32-10.32-2.el8.x86_64 \
  pixman-0.38.4-2.el8.x86_64 \
  pkgconf-1.4.2-1.el8.x86_64 \
  pkgconf-m4-1.4.2-1.el8.noarch \
  pkgconf-pkg-config-1.4.2-1.el8.x86_64 \
  tcl-8.6.8-2.el8.x86_64 \
  tk-8.6.8-1.el8.x86_64 \
  unzip-6.0-46.el8.x86_64 \
  xz-devel-5.2.4-3.el8.x86_64 \
  zip-3.0-23.el8.x86_64 \
  zlib-devel-1.2.11-18.el8_5.x86_64 \
&& dnf clean all

RUN echo "Installing system level dependecies for R packages" \
&& dnf install -y ImageMagick \
   ImageMagick-c++ \
   ImageMagick-libs \
   LibRaw-0.19.5-3.el8.x86_64 \
   Lmod-8.2.7-1.el8.x86_64 \
   OpenEXR-libs-2.2.0-12.el8.x86_64 \
   SuperLU-5.2.0-7.el8.x86_64 \
   adobe-mappings-cmap-20171205-3.el8.noarch \
   adobe-mappings-cmap-deprecated-20171205-3.el8.noarch \
   adobe-mappings-pdf-20180407-1.el8.noarch \
   alsa-lib-1.2.6.1-3.el8.x86_64 \
   annobin-10.29-3.el8.x86_64 \
   armadillo \
   arpack-3.7.0-1.el8.x86_64 \
   atk-2.28.1-1.el8.x86_64 \
   atk-devel-2.28.1-1.el8.x86_64 \
   atlas-3.10.3-8.el8.x86_64 \
   autoconf-2.69-29.el8.noarch \
   automake-1.16.1-7.el8.noarch \
   avahi-libs-0.7-20.el8.x86_64 \
   blas-3.8.0-8.el8.x86_64 \
   cairo-devel-1.15.12-6.el8.x86_64 \
   cargo-1.58.1-1.module+el8.6.0+14021+586eff1a.x86_64 \
   cfitsio-3.47-1.el8.x86_64 \
   cmake-3.20.2-4.el8.x86_64 \
   cmake-data-3.20.2-4.el8.noarch \
   cmake-filesystem-3.20.2-4.el8.x86_64 \
   cmake-rpm-macros-3.20.2-4.el8.noarch \
   copy-jdk-configs-4.0-2.el8.noarch \
   cups-libs-2.2.6-44.el8.x86_64 \
   dwz-0.12-10.el8.x86_64 \
   efi-srpm-macros-3-3.el8.noarch \
   elfutils-debuginfod-client-0.186-1.el8.x86_64 \
   emacs-filesystem-26.1-7.el8.noarch \
   expat-devel-2.2.5-8.el8.x86_64 \
   fftw-3.3.5-11.el8.x86_64 \
   fftw-devel-3.3.5-11.el8.x86_64 \
   fftw-libs-3.3.5-11.el8.x86_64 \
   fftw-libs-double-3.3.5-11.el8.x86_64 \
   fftw-libs-long-3.3.5-11.el8.x86_64 \
   fftw-libs-quad-3.3.5-11.el8.x86_64 \
   fftw-libs-single-3.3.5-11.el8.x86_64 \
   file-5.33-20.el8.x86_64 \
   fontconfig-devel-2.13.1-4.el8.x86_64 \
   freetype-devel-2.9.1-4.el8_3.1.x86_64 \
   freexl-1.0.6-4.el8.x86_64 \
   fribidi-devel-1.0.4-8.el8.x86_64 \
   gd-2.2.5-7.el8.x86_64 \
   gdal \
   gdal-devel \
   gdal-libs \
   gdk-pixbuf2-2.36.12-5.el8.x86_64 \
   gdk-pixbuf2-devel-2.36.12-5.el8.x86_64 \
   gdk-pixbuf2-modules-2.36.12-5.el8.x86_64 \
   geos-3.7.2-1.el8.x86_64 \
   geos-devel-3.7.2-1.el8.x86_64 \
   gettext-0.19.8.1-17.el8.x86_64 \
   gettext-libs-0.19.8.1-17.el8.x86_64 \
   ghc-srpm-macros-1.4.2-7.el8.noarch \
   ghostscript-9.27-1.el8.x86_64 \
   giflib-5.1.4-3.el8.x86_64 \
   git-2.31.1-2.el8.x86_64 \
   git-core-2.31.1-2.el8.x86_64 \
   git-core-doc-2.31.1-2.el8.noarch \
   gl-manpages-1.1-15.20161227.el8.noarch \
   glib2-devel-2.56.4-158.el8.x86_64 \
   glibc-gconv-extra-2.28-189.1.el8.x86_64 \
   glpk-4.65-4.el8.x86_64 \
   glpk-devel-4.65-4.el8.x86_64 \
   gmp-c++-6.1.2-10.el8.x86_64 \
   gmp-devel-6.1.2-10.el8.x86_64 \
   go-srpm-macros-2-17.el8.noarch \
   google-droid-sans-fonts-20120715-13.el8.noarch \
   gpsbabel-1.6.0-3.el8.x86_64 \
   graphite2-devel-1.3.10-10.el8.x86_64 \
   graphviz-2.40.1-43.el8.x86_64 \
   groff-base-1.22.3-18.el8.x86_64 \
   gsl-2.5-1.el8.x86_64 \
   gsl-devel-2.5-1.el8.x86_64 \
   gtk-update-icon-cache-3.22.30-10.el8.x86_64 \
   gtk2-2.24.32-5.el8.x86_64 \
   gtk2-devel-2.24.32-5.el8.x86_64 \
   harfbuzz-devel-1.7.5-3.el8.x86_64 \
   harfbuzz-icu-1.7.5-3.el8.x86_64 \
   hdf-4.2.14-5.el8.x86_64 \
   hdf5-1.10.5-4.el8.x86_64 \
   hicolor-icon-theme-0.17-2.el8.noarch \
   http-parser-2.8.0-9.el8.x86_64 \
   hwdata-0.314-8.12.el8.noarch \
   hwloc-libs-2.2.0-3.el8.x86_64 \
   ilmbase-2.2.0-13.el8.x86_64 \
   jasper-libs-2.0.14-5.el8.x86_64 \
   java-1.8.0-openjdk-1.8.0.332.b09-2.el8_6.x86_64 \
   java-1.8.0-openjdk-devel-1.8.0.332.b09-2.el8_6.x86_64 \
   java-1.8.0-openjdk-headless-1.8.0.332.b09-2.el8_6.x86_64 \
   javapackages-filesystem-5.3.0-1.module+el8+2447+6f56d9a6.noarch \
   jbig2dec-libs-0.16-1.el8.x86_64 \
   keyutils-libs-devel-1.5.10-9.el8.x86_64 \
   krb5-devel-1.18.2-14.el8.x86_64 \
   lapack-3.8.0-8.el8.x86_64 \
   lcms2-2.9-2.el8.x86_64 \
   less-530-1.el8.x86_64 \
   libX11-devel-1.6.8-5.el8.x86_64 \
   libX11-xcb-1.6.8-5.el8.x86_64 \
   libXau-devel-1.0.9-3.el8.x86_64 \
   libXaw-1.0.13-10.el8.x86_64 \
   libXcomposite-0.4.4-14.el8.x86_64 \
   libXcomposite-devel-0.4.4-14.el8.x86_64 \
   libXcursor-1.1.15-3.el8.x86_64 \
   libXcursor-devel-1.1.15-3.el8.x86_64 \
   libXdamage-1.1.4-14.el8.x86_64 \
   libXext-devel-1.3.4-1.el8.x86_64 \
   libXfixes-5.0.3-7.el8.x86_64 \
   libXfixes-devel-5.0.3-7.el8.x86_64 \
   libXft-devel-2.3.3-1.el8.x86_64 \
   libXi-1.7.10-1.el8.x86_64 \
   libXi-devel-1.7.10-1.el8.x86_64 \
   libXinerama-1.1.4-1.el8.x86_64 \
   libXinerama-devel-1.1.4-1.el8.x86_64 \
   libXpm-3.5.12-8.el8.x86_64 \
   libXrandr-1.5.2-1.el8.x86_64 \
   libXrandr-devel-1.5.2-1.el8.x86_64 \
   libXrender-devel-0.9.10-7.el8.x86_64 \
   libXtst-1.2.3-7.el8.x86_64 \
   libXxf86misc-1.0.4-1.el8.x86_64 \
   libXxf86vm-1.1.4-9.el8.x86_64 \
   libaec-1.0.2-3.el8.x86_64 \
   libbsd-0.9.1-4.el8.x86_64 \
   libcom_err-devel-1.45.6-4.el8.x86_64 \
   libcroco-0.6.12-4.el8_2.1.x86_64 \
   libdap-3.19.1-2.el8.x86_64 \
   libdrm-2.4.108-1.el8.x86_64 \
   libdrm-devel-2.4.108-1.el8.x86_64 \
   libedit-3.1-23.20170329cvs.el8.x86_64 \
   libevent-2.1.8-5.el8.x86_64 \
   libfabric-1.14.0-1.el8.x86_64 \
   libfontenc-1.1.3-8.el8.x86_64 \
   libgeotiff-1.5.1-1.el8.x86_64 \
   libgit2-0.26.8-2.el8.x86_64 \
   libgit2-devel-0.26.8-2.el8.x86_64 \
   libglvnd-1.3.4-1.el8.x86_64 \
   libglvnd-core-devel-1.3.4-1.el8.x86_64 \
   libglvnd-devel-1.3.4-1.el8.x86_64 \
   libglvnd-egl-1.3.4-1.el8.x86_64 \
   libglvnd-gles-1.3.4-1.el8.x86_64 \
   libglvnd-glx-1.3.4-1.el8.x86_64 \
   libglvnd-opengl-1.3.4-1.el8.x86_64 \
   libgs-9.27-1.el8.x86_64 \
   libgta-1.2.1-1.el8.x86_64 \
   libibumad-37.2-1.el8.x86_64 \
   libibverbs-37.2-1.el8.x86_64 \
   libidn-1.34-5.el8.x86_64 \
   libijs-0.35-5.el8.x86_64 \
   libjpeg-turbo-devel-1.5.3-12.el8.x86_64 \
   libkadm5-1.18.2-14.el8.x86_64 \
   libkml-1.3.0-24.el8.x86_64 \
   libmcpp-2.7.2-20.el8.x86_64 \
   libpaper-1.1.24-22.el8.x86_64 \
   libpciaccess-0.14-1.el8.x86_64 \
   libpciaccess-devel-0.14-1.el8.x86_64 \
   libpng-devel-1.6.34-5.el8.x86_64 \
   libpq-13.5-1.el8.x86_64 \
   libpsm2-11.2.206-1.el8.x86_64 \
   libraqm-0.7.0-4.el8.x86_64 \
   librdmacm-37.2-1.el8.x86_64 \
   librsvg2-2.42.7-4.el8.x86_64 \
   librsvg2-devel-2.42.7-4.el8.x86_64 \
   libsecret-0.18.6-1.el8.x86_64 \
   libsecret-devel-0.18.6-1.el8.x86_64 \
   libselinux-devel-2.9-5.el8.x86_64 \
   libsepol-devel-2.9-3.el8.x86_64 \
   libsodium-1.0.18-2.el8.x86_64 \
   libsodium-devel-1.0.18-2.el8.x86_64 \
   libspatialite-5.0.0-1.el8.x86_64 \
   libssh2-1.8.0-8.module+el8.0.0+4084+cceb9f44.1.x86_64 \
   libtiff-devel-4.0.9-21.el8.x86_64 \
   libtool-ltdl-2.4.6-25.el8.x86_64 \
   libusb-0.1.5-12.el8.x86_64 \
   libuuid-devel-2.32.1-35.el8.x86_64 \
   libuv-1.41.1-1.el8_4.x86_64 \
   libverto-devel-0.3.0-5.el8.x86_64 \
   libwayland-client-1.19.0-1.el8.x86_64 \
   libwayland-server-1.19.0-1.el8.x86_64 \
   libwebp-1.0.0-5.el8.x86_64 \
   libwmf-lite-0.2.9-8.el8_0.x86_64 \
   libxcb-devel-1.13.1-1.el8.x86_64 \
   libxml2-devel-2.9.7-13.el8.x86_64 \
   libxshmfence-1.3-2.el8.x86_64 \
   lksctp-tools-1.0.18-3.el8.x86_64 \
   llvm-libs-13.0.1-1.module+el8.6.0+14118+d530a951.x86_64 \
   lua-5.3.4-12.el8.x86_64 \
   lua-filesystem-1.6.3-7.el8.x86_64 \
   lua-json-1.3.2-9.el8.noarch \
   lua-lpeg-1.0.1-6.el8.x86_64 \
   lua-posix-33.3.1-9.el8.x86_64 \
   lua-term-0.07-9.el8.x86_64 \
   m4-1.4.18-7.el8.x86_64 \
   mariadb-connector-c-3.1.11-2.el8_3.x86_64 \
   mariadb-connector-c-config-3.1.11-2.el8_3.noarch \
   mariadb-connector-c-devel-3.1.11-2.el8_3.x86_64 \
   mariadb-devel-10.3.32-2.module+el8.5.0+14124+14ced695.x86_64 \
   mcpp-2.7.2-20.el8.x86_64 \
   mesa-libEGL-21.3.4-1.el8.x86_64 \
   mesa-libGL-21.3.4-1.el8.x86_64 \
   mesa-libGL-devel-21.3.4-1.el8.x86_64 \
   mesa-libGLU-9.0.0-15.el8.x86_64 \
   mesa-libGLU-devel-9.0.0-15.el8.x86_64 \
   mesa-libgbm-21.3.4-1.el8.x86_64 \
   mesa-libglapi-21.3.4-1.el8.x86_64 \
   minizip-2.8.9-2.el8.x86_64 \
   mpfr-devel-3.1.6-1.el8.x86_64 \
   munge-libs-0.5.13-2.el8.x86_64 \
   ncurses-6.1-9.20180224.el8.x86_64 \
   netcdf-4.7.0-2.el8.x86_64 \
   nspr-4.32.0-1.el8_4.x86_64 \
   nss-3.67.0-7.el8_5.x86_64 \
   nss-softokn-3.67.0-7.el8_5.x86_64 \
   nss-softokn-freebl-3.67.0-7.el8_5.x86_64 \
   nss-sysinit-3.67.0-7.el8_5.x86_64 \
   nss-util-3.67.0-7.el8_5.x86_64 \
   numactl-libs-2.0.12-13.el8.x86_64 \
   ocaml-srpm-macros-5-4.el8.noarch \
   ogdi-4.1.0-1.el8.x86_64 \
   openblas-0.3.15-3.el8.x86_64 \
   openblas-openmp-0.3.15-3.el8.x86_64 \
   openblas-srpm-macros-2-2.el8.noarch \
   openblas-threads64_-0.3.15-3.el8.x86_64 \
   openjpeg2-2.4.0-4.el8.x86_64 \
   openmpi-4.1.1-3.el8.x86_64 \
   openmpi-devel-4.1.1-3.el8.x86_64 \
   opensm-libs-3.3.24-1.el8.x86_64 \
   openssh-8.0p1-13.el8.x86_64 \
   openssh-clients-8.0p1-13.el8.x86_64 \
   openssl-1.1.1k-6.el8_5.x86_64 \
   openssl-devel-1.1.1k-6.el8_5.x86_64 \
   pango-devel-1.42.4-8.el8.x86_64 \
   pcre-cpp-8.42-6.el8.x86_64 \
   pcre-devel-8.42-6.el8.x86_64 \
   pcre-utf16-8.42-6.el8.x86_64 \
   pcre-utf32-8.42-6.el8.x86_64 \
   perl-5.26.3-421.el8.x86_64 \
   perl-Algorithm-Diff-1.1903-9.el8.noarch \
   perl-Archive-Tar-2.30-1.el8.noarch \
   perl-Archive-Zip-1.60-3.el8.noarch \
   perl-Attribute-Handlers-0.99-421.el8.noarch \
   perl-B-Debug-1.26-2.el8.noarch \
   perl-CPAN-2.18-397.el8.noarch \
   perl-CPAN-Meta-2.150010-396.el8.noarch \
   perl-CPAN-Meta-Requirements-2.140-396.el8.noarch \
   perl-CPAN-Meta-YAML-0.018-397.el8.noarch \
   perl-Carp-1.42-396.el8.noarch \
   perl-Compress-Bzip2-2.26-6.el8.x86_64 \
   perl-Compress-Raw-Bzip2-2.081-1.el8.x86_64 \
   perl-Compress-Raw-Zlib-2.081-1.el8.x86_64 \
   perl-Config-Perl-V-0.30-1.el8.noarch \
   perl-DB_File-1.842-1.el8.x86_64 \
   perl-Data-Dumper-2.167-399.el8.x86_64 \
   perl-Data-OptList-0.110-6.el8.noarch \
   perl-Data-Section-0.200007-3.el8.noarch \
   perl-Devel-PPPort-3.36-5.el8.x86_64 \
   perl-Devel-Peek-1.26-421.el8.x86_64 \
   perl-Devel-SelfStubber-1.06-421.el8.noarch \
   perl-Devel-Size-0.81-2.el8.x86_64 \
   perl-Digest-1.17-395.el8.noarch \
   perl-Digest-MD5-2.55-396.el8.x86_64 \
   perl-Digest-SHA-6.02-1.el8.x86_64 \
   perl-Encode-2.97-3.el8.x86_64 \
   perl-Encode-Locale-1.05-10.module+el8.3.0+6498+9eecfe51.noarch \
   perl-Encode-devel-2.97-3.el8.x86_64 \
   perl-Env-1.04-395.el8.noarch \
   perl-Errno-1.28-421.el8.x86_64 \
   perl-Error-0.17025-2.el8.noarch \
   perl-Exporter-5.72-396.el8.noarch \
   perl-ExtUtils-CBuilder-0.280230-2.el8.noarch \
   perl-ExtUtils-Command-7.34-1.el8.noarch \
   perl-ExtUtils-Embed-1.34-421.el8.noarch \
   perl-ExtUtils-Install-2.14-4.el8.noarch \
   perl-ExtUtils-MM-Utils-7.34-1.el8.noarch \
   perl-ExtUtils-MakeMaker-7.34-1.el8.noarch \
   perl-ExtUtils-Manifest-1.70-395.el8.noarch \
   perl-ExtUtils-Miniperl-1.06-421.el8.noarch \
   perl-ExtUtils-ParseXS-3.35-2.el8.noarch \
   perl-File-Fetch-0.56-2.el8.noarch \
   perl-File-HomeDir-1.002-4.el8.noarch \
   perl-File-Path-2.15-2.el8.noarch \
   perl-File-Temp-0.230.600-1.el8.noarch \
   perl-File-Which-1.22-2.el8.noarch \
   perl-Filter-1.58-2.el8.x86_64 \
   perl-Filter-Simple-0.94-2.el8.noarch \
   perl-Getopt-Long-2.50-4.el8.noarch \
   perl-Git-2.31.1-2.el8.noarch \
   perl-HTTP-Tiny-0.074-1.el8.noarch \
   perl-IO-1.38-421.el8.x86_64 \
   perl-IO-Compress-2.081-1.el8.noarch \
   perl-IO-Socket-IP-0.39-5.el8.noarch \
   perl-IO-Socket-SSL-2.066-4.module+el8.3.0+6446+594cad75.noarch \
   perl-IO-Zlib-1.10-421.el8.noarch \
   perl-IPC-Cmd-1.02-1.el8.noarch \
   perl-IPC-SysV-2.07-397.el8.x86_64 \
   perl-IPC-System-Simple-1.25-17.el8.noarch \
   perl-JSON-PP-2.97.001-3.el8.noarch \
   perl-Locale-Codes-3.57-1.el8.noarch \
   perl-Locale-Maketext-1.28-396.el8.noarch \
   perl-Locale-Maketext-Simple-0.21-421.el8.noarch \
   perl-MIME-Base64-3.15-396.el8.x86_64 \
   perl-MRO-Compat-0.13-4.el8.noarch \
   perl-Math-BigInt-1.9998.11-7.el8.noarch \
   perl-Math-BigInt-FastCalc-0.500.600-6.el8.x86_64 \
   perl-Math-BigRat-0.2614-1.el8.noarch \
   perl-Math-Complex-1.59-421.el8.noarch \
   perl-Memoize-1.03-421.el8.noarch \
   perl-Module-Build-0.42.24-5.el8.noarch \
   perl-Module-CoreList-5.20181130-1.el8.noarch \
   perl-Module-CoreList-tools-5.20181130-1.el8.noarch \
   perl-Module-Load-0.32-395.el8.noarch \
   perl-Module-Load-Conditional-0.68-395.el8.noarch \
   perl-Module-Loaded-0.08-421.el8.noarch \
   perl-Module-Metadata-1.000033-395.el8.noarch \
   perl-Mozilla-CA-20160104-7.module+el8.3.0+6498+9eecfe51.noarch \
   perl-Net-Ping-2.55-421.el8.noarch \
   perl-Net-SSLeay-1.88-2.module+el8.6.0+13392+f0897f98.x86_64 \
   perl-Package-Generator-1.106-11.el8.noarch \
   perl-Params-Check-0.38-395.el8.noarch \
   perl-Params-Util-1.07-22.el8.x86_64 \
   perl-PathTools-3.74-1.el8.x86_64 \
   perl-Perl-OSType-1.010-396.el8.noarch \
   perl-PerlIO-via-QuotedPrint-0.08-395.el8.noarch \
   perl-Pod-Checker-1.73-395.el8.noarch \
   perl-Pod-Escapes-1.07-395.el8.noarch \
   perl-Pod-Html-1.22.02-421.el8.noarch \
   perl-Pod-Parser-1.63-396.el8.noarch \
   perl-Pod-Perldoc-3.28-396.el8.noarch \
   perl-Pod-Simple-3.35-395.el8.noarch \
   perl-Pod-Usage-1.69-395.el8.noarch \
   perl-Scalar-List-Utils-1.49-2.el8.x86_64 \
   perl-SelfLoader-1.23-421.el8.noarch \
   perl-Socket-2.027-3.el8.x86_64 \
   perl-Software-License-0.103013-2.el8.noarch \
   perl-Storable-3.11-3.el8.x86_64 \
   perl-Sub-Exporter-0.987-15.el8.noarch \
   perl-Sub-Install-0.928-14.el8.noarch \
   perl-Sys-Syslog-0.35-397.el8.x86_64 \
   perl-Term-ANSIColor-4.06-396.el8.noarch \
   perl-Term-Cap-1.17-395.el8.noarch \
   perl-TermReadKey-2.37-7.el8.x86_64 \
   perl-Test-1.30-421.el8.noarch \
   perl-Test-Harness-3.42-1.el8.noarch \
   perl-Test-Simple-1.302135-1.el8.noarch \
   perl-Text-Balanced-2.03-395.el8.noarch \
   perl-Text-Diff-1.45-2.el8.noarch \
   perl-Text-Glob-0.11-4.el8.noarch \
   perl-Text-ParseWords-3.30-395.el8.noarch \
   perl-Text-Tabs+Wrap-2013.0523-395.el8.noarch \
   perl-Text-Template-1.51-1.el8.noarch \
   perl-Text-Unidecode-1.30-5.el8.noarch \
   perl-Thread-Queue-3.13-1.el8.noarch \
   perl-Time-HiRes-1.9758-2.el8.x86_64 \
   perl-Time-Local-1.280-1.el8.noarch \
   perl-Time-Piece-1.31-421.el8.x86_64 \
   perl-Tk-804.034-2.el8.x86_64 \
   perl-URI-1.73-3.el8.noarch \
   perl-Unicode-Collate-1.25-2.el8.x86_64 \
   perl-Unicode-Normalize-1.25-396.el8.x86_64 \
   perl-XML-Parser-2.44-11.el8.x86_64 \
   perl-XML-XPath-1.42-3.el8.noarch \
   perl-autodie-2.29-396.el8.noarch \
   perl-bignum-0.49-2.el8.noarch \
   perl-constant-1.33-396.el8.noarch \
   perl-devel-5.26.3-421.el8.x86_64 \
   perl-encoding-2.22-3.el8.x86_64 \
   perl-experimental-0.019-2.el8.noarch \
   perl-inc-latest-0.500-9.el8.noarch \
   perl-interpreter-5.26.3-421.el8.x86_64 \
   perl-libnet-3.11-3.el8.noarch \
   perl-libnetcfg-5.26.3-421.el8.noarch \
   perl-libs-5.26.3-421.el8.x86_64 \
   perl-local-lib-2.000024-2.el8.noarch \
   perl-macros-5.26.3-421.el8.x86_64 \
   perl-open-1.11-421.el8.noarch \
   perl-parent-0.237-1.el8.noarch \
   perl-perlfaq-5.20180605-1.el8.noarch \
   perl-podlators-4.11-1.el8.noarch \
   perl-srpm-macros-1-25.el8.noarch \
   perl-threads-2.21-2.el8.x86_64 \
   perl-threads-shared-1.58-2.el8.x86_64 \
   perl-utils-5.26.3-421.el8.noarch \
   perl-version-0.99.24-1.el8.x86_64 \
   pixman-devel-0.38.4-2.el8.x86_64 \
   platform-python-pip-9.0.3-22.el8.noarch \
   pmix-2.2.5-1.el8.x86_64 \
   poppler-20.11.0-4.el8.x86_64 \
   poppler-data-0.4.9-1.el8.noarch \
   postgresql-server-devel-10.19-1.module+el8.6.0+13642+78853f5a.x86_64 \
   procps-ng-3.3.15-6.el8.x86_64 \
   proj-6.3.2-4.el8.x86_64 \
   proj-datumgrid-1.8-6.3.2.4.el8.noarch \
   proj-devel-6.3.2-4.el8.x86_64 \
   python-rpm-macros-3-41.el8.noarch \
   python-srpm-macros-3-41.el8.noarch \
   python2-2.7.18-10.module+el8.6.0+14191+7fdd52cd.x86_64 \
   python2-libs-2.7.18-10.module+el8.6.0+14191+7fdd52cd.x86_64 \
   python2-pip-9.0.3-19.module+el8.6.0+13001+ad200bd9.noarch \
   python2-pip-wheel-9.0.3-19.module+el8.6.0+13001+ad200bd9.noarch \
   python2-setuptools-39.0.1-13.module+el8.4.0+9442+27d0e81c.noarch \
   python2-setuptools-wheel-39.0.1-13.module+el8.4.0+9442+27d0e81c.noarch \
   python3-pip-9.0.3-22.el8.noarch \
   python3-pyparsing-2.1.10-7.el8.noarch \
   python3-rpm-macros-3-41.el8.noarch \
   python3-setuptools-39.2.0-6.el8.noarch \
   python36-3.6.8-38.module+el8.5.0+12207+5c5719bc.x86_64 \
   qt5-qtbase-5.15.2-4.el8.x86_64 \
   qt5-qtbase-common-5.15.2-4.el8.noarch \
   qt5-srpm-macros-5.15.2-1.el8.noarch \
   redhat-rpm-config-129-1.el8.noarch \
   rpm-mpi-hooks-8-2.el8.noarch \
   rust-1.58.1-1.module+el8.6.0+14021+586eff1a.x86_64 \
   rust-srpm-macros-5-2.el8.noarch \
   rust-std-static-1.58.1-1.module+el8.6.0+14021+586eff1a.x86_64 \
   shapelib-1.5.0-1.el8.x86_64 \
   shared-mime-info-1.9-3.el8.x86_64 \
   sqlite-3.26.0-15.el8.x86_64 \
   sqlite-devel-3.26.0-15.el8.x86_64 \
   suitesparse-4.4.6-11.el8.x86_64 \
   systemtap-sdt-devel-4.6-4.el8.x86_64 \
   tbb-2018.2-9.el8.x86_64 \
   tcl-devel-8.6.8-2.el8.x86_64 \
   teckit-2.5.8-1.el8.x86_64 \
   texlive-20180414-25.el8.x86_64 \
   texlive-ae-20180414-25.el8.noarch \
   texlive-algorithms-20180414-25.el8.noarch \
   texlive-amscls-20180414-25.el8.noarch \
   texlive-amsfonts-20180414-25.el8.noarch \
   texlive-amsmath-20180414-25.el8.noarch \
   texlive-anysize-20180414-25.el8.noarch \
   texlive-attachfile-20180414-25.el8.noarch \
   texlive-avantgar-20180414-25.el8.noarch \
   texlive-babel-20180414-25.el8.noarch \
   texlive-babel-english-20180414-25.el8.noarch \
   texlive-babelbib-20180414-25.el8.noarch \
   texlive-base-20180414-25.el8.noarch \
   texlive-beamer-20180414-25.el8.noarch \
   texlive-bera-20180414-25.el8.noarch \
   texlive-beton-20180414-25.el8.noarch \
   texlive-bibtex-20180414-25.el8.x86_64 \
   texlive-bookman-20180414-25.el8.noarch \
   texlive-booktabs-20180414-25.el8.noarch \
   texlive-breakurl-20180414-25.el8.noarch \
   texlive-breqn-20180414-25.el8.noarch \
   texlive-caption-20180414-25.el8.noarch \
   texlive-carlisle-20180414-25.el8.noarch \
   texlive-charter-20180414-25.el8.noarch \
   texlive-chngcntr-20180414-25.el8.noarch \
   texlive-cite-20180414-25.el8.noarch \
   texlive-cm-20180414-25.el8.noarch \
   texlive-cm-super-20180414-25.el8.noarch \
   texlive-cmap-20180414-25.el8.noarch \
   texlive-cmextra-20180414-25.el8.noarch \
   texlive-collection-basic-20180414-25.el8.noarch \
   texlive-collection-fontsrecommended-20180414-25.el8.noarch \
   texlive-collection-latex-20180414-25.el8.noarch \
   texlive-collection-latexrecommended-20180414-25.el8.noarch \
   texlive-colortbl-20180414-25.el8.noarch \
   texlive-context-20180414-25.el8.noarch \
   texlive-courier-20180414-25.el8.noarch \
   texlive-crop-20180414-25.el8.noarch \
   texlive-csquotes-20180414-25.el8.noarch \
   texlive-ctable-20180414-25.el8.noarch \
   texlive-currfile-20180414-25.el8.noarch \
   texlive-dvipdfmx-20180414-25.el8.x86_64 \
   texlive-dvips-20180414-25.el8.x86_64 \
   texlive-ec-20180414-25.el8.noarch \
   texlive-enctex-20180414-25.el8.noarch \
   texlive-enumitem-20180414-25.el8.noarch \
   texlive-eso-pic-20180414-25.el8.noarch \
   texlive-etex-20180414-25.el8.noarch \
   texlive-etex-pkg-20180414-25.el8.noarch \
   texlive-etoolbox-20180414-25.el8.noarch \
   texlive-euenc-20180414-25.el8.noarch \
   texlive-euler-20180414-25.el8.noarch \
   texlive-euro-20180414-25.el8.noarch \
   texlive-eurosym-20180414-25.el8.noarch \
   texlive-extsizes-20180414-25.el8.noarch \
   texlive-fancybox-20180414-25.el8.noarch \
   texlive-fancyhdr-20180414-25.el8.noarch \
   texlive-fancyref-20180414-25.el8.noarch \
   texlive-fancyvrb-20180414-25.el8.noarch \
   texlive-filecontents-20180414-25.el8.noarch \
   texlive-filehook-20180414-25.el8.noarch \
   texlive-finstrut-20180414-25.el8.noarch \
   texlive-fix2col-20180414-25.el8.noarch \
   texlive-float-20180414-25.el8.noarch \
   texlive-fontspec-20180414-25.el8.noarch \
   texlive-footmisc-20180414-25.el8.noarch \
   texlive-fp-20180414-25.el8.noarch \
   texlive-fpl-20180414-25.el8.noarch \
   texlive-geometry-20180414-25.el8.noarch \
   texlive-glyphlist-20180414-25.el8.noarch \
   texlive-graphics-20180414-25.el8.noarch \
   texlive-graphics-cfg-20180414-25.el8.noarch \
   texlive-graphics-def-20180414-25.el8.noarch \
   texlive-gsftopk-20180414-25.el8.x86_64 \
   texlive-helvetic-20180414-25.el8.noarch \
   texlive-hyperref-20180414-25.el8.noarch \
   texlive-hyph-utf8-20180414-25.el8.noarch \
   texlive-hyphen-base-20180414-25.el8.noarch \
   texlive-ifetex-20180414-25.el8.noarch \
   texlive-ifluatex-20180414-25.el8.noarch \
   texlive-iftex-20180414-25.el8.noarch \
   texlive-ifxetex-20180414-25.el8.noarch \
   texlive-index-20180414-25.el8.noarch \
   texlive-jknapltx-20180414-25.el8.noarch \
   texlive-kastrup-20180414-25.el8.noarch \
   texlive-knuth-lib-20180414-25.el8.noarch \
   texlive-knuth-local-20180414-25.el8.noarch \
   texlive-koma-script-20180414-25.el8.noarch \
   texlive-kpathsea-20180414-25.el8.x86_64 \
   texlive-l3experimental-20180414-25.el8.noarch \
   texlive-l3kernel-20180414-25.el8.noarch \
   texlive-l3packages-20180414-25.el8.noarch \
   texlive-latex-20180414-25.el8.noarch \
   texlive-latex-fonts-20180414-25.el8.noarch \
   texlive-latexconfig-20180414-25.el8.noarch \
   texlive-lib-20180414-25.el8.x86_64 \
   texlive-lineno-20180414-25.el8.noarch \
   texlive-listings-20180414-25.el8.noarch \
   texlive-lm-20180414-25.el8.noarch \
   texlive-lm-math-20180414-25.el8.noarch \
   texlive-ltabptch-20180414-25.el8.noarch \
   texlive-ltxmisc-20180414-25.el8.noarch \
   texlive-lua-alt-getopt-20180414-25.el8.noarch \
   texlive-lualatex-math-20180414-25.el8.noarch \
   texlive-lualibs-20180414-25.el8.noarch \
   texlive-luaotfload-20180414-25.el8.noarch \
   texlive-luatex-20180414-25.el8.x86_64 \
   texlive-luatexbase-20180414-25.el8.noarch \
   texlive-makeindex-20180414-25.el8.x86_64 \
   texlive-manfnt-font-20180414-25.el8.noarch \
   texlive-marginnote-20180414-25.el8.noarch \
   texlive-marvosym-20180414-25.el8.noarch \
   texlive-mathpazo-20180414-25.el8.noarch \
   texlive-mathtools-20180414-25.el8.noarch \
   texlive-mdwtools-20180414-25.el8.noarch \
   texlive-memoir-20180414-25.el8.noarch \
   texlive-metafont-20180414-25.el8.x86_64 \
   texlive-metalogo-20180414-25.el8.noarch \
   texlive-metapost-20180414-25.el8.x86_64 \
   texlive-mflogo-20180414-25.el8.noarch \
   texlive-mflogo-font-20180414-25.el8.noarch \
   texlive-mfnfss-20180414-25.el8.noarch \
   texlive-mfware-20180414-25.el8.x86_64 \
   texlive-microtype-20180414-25.el8.noarch \
   texlive-mparhack-20180414-25.el8.noarch \
   texlive-mptopdf-20180414-25.el8.noarch \
   texlive-ms-20180414-25.el8.noarch \
   texlive-multido-20180414-25.el8.noarch \
   texlive-natbib-20180414-25.el8.noarch \
   texlive-ncntrsbk-20180414-25.el8.noarch \
   texlive-ntgclass-20180414-25.el8.noarch \
   texlive-oberdiek-20180414-25.el8.noarch \
   texlive-palatino-20180414-25.el8.noarch \
   texlive-paralist-20180414-25.el8.noarch \
   texlive-parallel-20180414-25.el8.noarch \
   texlive-parskip-20180414-25.el8.noarch \
   texlive-pdfpages-20180414-25.el8.noarch \
   texlive-pdftex-20180414-25.el8.x86_64 \
   texlive-pgf-20180414-25.el8.noarch \
   texlive-plain-20180414-25.el8.noarch \
   texlive-powerdot-20180414-25.el8.noarch \
   texlive-psfrag-20180414-25.el8.noarch \
   texlive-pslatex-20180414-25.el8.noarch \
   texlive-psnfss-20180414-25.el8.noarch \
   texlive-pspicture-20180414-25.el8.noarch \
   texlive-pst-3d-20180414-25.el8.noarch \
   texlive-pst-arrow-20180414-25.el8.noarch \
   texlive-pst-blur-20180414-25.el8.noarch \
   texlive-pst-coil-20180414-25.el8.noarch \
   texlive-pst-eps-20180414-25.el8.noarch \
   texlive-pst-fill-20180414-25.el8.noarch \
   texlive-pst-grad-20180414-25.el8.noarch \
   texlive-pst-math-20180414-25.el8.noarch \
   texlive-pst-node-20180414-25.el8.noarch \
   texlive-pst-plot-20180414-25.el8.noarch \
   texlive-pst-slpe-20180414-25.el8.noarch \
   texlive-pst-text-20180414-25.el8.noarch \
   texlive-pst-tools-20180414-25.el8.noarch \
   texlive-pst-tree-20180414-25.el8.noarch \
   texlive-pstricks-20180414-25.el8.noarch \
   texlive-pstricks-add-20180414-25.el8.noarch \
   texlive-pxfonts-20180414-25.el8.noarch \
   texlive-qstest-20180414-25.el8.noarch \
   texlive-rcs-20180414-25.el8.noarch \
   texlive-rsfs-20180414-25.el8.noarch \
   texlive-sansmath-20180414-25.el8.noarch \
   texlive-sauerj-20180414-25.el8.noarch \
   texlive-scheme-basic-20180414-25.el8.noarch \
   texlive-section-20180414-25.el8.noarch \
   texlive-seminar-20180414-25.el8.noarch \
   texlive-sepnum-20180414-25.el8.noarch \
   texlive-setspace-20180414-25.el8.noarch \
   texlive-showexpl-20180414-25.el8.noarch \
   texlive-soul-20180414-25.el8.noarch \
   texlive-stmaryrd-20180414-25.el8.noarch \
   texlive-subfig-20180414-25.el8.noarch \
   texlive-symbol-20180414-25.el8.noarch \
   texlive-tetex-20180414-25.el8.noarch \
   texlive-tex-20180414-25.el8.x86_64 \
   texlive-tex-gyre-20180414-25.el8.noarch \
   texlive-tex-gyre-math-20180414-25.el8.noarch \
   texlive-tex-ini-files-20180414-25.el8.noarch \
   texlive-texconfig-20180414-25.el8.noarch \
   texlive-texlive-common-doc-20180414-25.el8.noarch \
   texlive-texlive-docindex-20180414-25.el8.noarch \
   texlive-texlive-en-20180414-25.el8.noarch \
   texlive-texlive-msg-translations-20180414-25.el8.noarch \
   texlive-texlive-scripts-20180414-25.el8.noarch \
   texlive-texlive.infra-20180414-25.el8.noarch \
   texlive-textcase-20180414-25.el8.noarch \
   texlive-thumbpdf-20180414-25.el8.noarch \
   texlive-times-20180414-25.el8.noarch \
   texlive-tipa-20180414-25.el8.noarch \
   texlive-tools-20180414-25.el8.noarch \
   texlive-txfonts-20180414-25.el8.noarch \
   texlive-type1cm-20180414-25.el8.noarch \
   texlive-typehtml-20180414-25.el8.noarch \
   texlive-ucs-20180414-25.el8.noarch \
   texlive-underscore-20180414-25.el8.noarch \
   texlive-unicode-data-20180414-25.el8.noarch \
   texlive-unicode-math-20180414-25.el8.noarch \
   texlive-updmap-map-20180414-25.el8.noarch \
   texlive-url-20180414-25.el8.noarch \
   texlive-utopia-20180414-25.el8.noarch \
   texlive-varwidth-20180414-25.el8.noarch \
   texlive-wasy-20180414-25.el8.noarch \
   texlive-wasy2-ps-20180414-25.el8.noarch \
   texlive-wasysym-20180414-25.el8.noarch \
   texlive-xcolor-20180414-25.el8.noarch \
   texlive-xdvi-20180414-25.el8.x86_64 \
   texlive-xetex-20180414-25.el8.x86_64 \
   texlive-xetexconfig-20180414-25.el8.noarch \
   texlive-xkeyval-20180414-25.el8.noarch \
   texlive-xunicode-20180414-25.el8.noarch \
   texlive-zapfchan-20180414-25.el8.noarch \
   texlive-zapfding-20180414-25.el8.noarch \
   tk-devel-8.6.8-1.el8.x86_64 \
   ttmkfdir-3.0.9-54.el8.x86_64 \
   tzdata-java-2022a-1.el8.noarch \
   ucx-1.11.2-2.el8.x86_64 \
   udunits2-2.2.26-5.el8.x86_64 \
   udunits2-devel-2.2.26-5.el8.x86_64 \
   unixODBC-2.3.7-1.el8.x86_64 \
   unixODBC-devel-2.3.7-1.el8.x86_64 \
   uriparser-0.9.3-2.el8.x86_64 \
   urw-base35-bookman-fonts-20170801-10.el8.noarch \
   urw-base35-c059-fonts-20170801-10.el8.noarch \
   urw-base35-d050000l-fonts-20170801-10.el8.noarch \
   urw-base35-fonts-20170801-10.el8.noarch \
   urw-base35-fonts-common-20170801-10.el8.noarch \
   urw-base35-gothic-fonts-20170801-10.el8.noarch \
   urw-base35-nimbus-mono-ps-fonts-20170801-10.el8.noarch \
   urw-base35-nimbus-roman-fonts-20170801-10.el8.noarch \
   urw-base35-nimbus-sans-fonts-20170801-10.el8.noarch \
   urw-base35-p052-fonts-20170801-10.el8.noarch \
   urw-base35-standard-symbols-ps-fonts-20170801-10.el8.noarch \
   urw-base35-z003-fonts-20170801-10.el8.noarch \
   valgrind-3.18.1-7.el8.x86_64 \
   valgrind-devel-3.18.1-7.el8.x86_64 \
   vim-filesystem-8.0.1763-16.el8_5.13.noarch \
   xerces-c-3.2.2-3.el8.x86_64 \
   xorg-x11-font-utils-7.5-41.el8.x86_64 \
   xorg-x11-fonts-ISO8859-1-100dpi-7.5-19.el8.noarch \
   xorg-x11-fonts-Type1-7.5-19.el8.noarch \
   xorg-x11-proto-devel-2020.1-3.el8.noarch \
   xorg-x11-server-utils-7.7-27.el8.x86_64 \
   zziplib-0.13.68-9.el8.x86_64 \
   libpq-devel-13.5-1.el8.x86_64 \
   libpq-devel-13.5-1.el8.x86_64 \
   ImageMagick-c++-devel \
   ImageMagick-devel \
   libICE-devel-1.0.9-15.el8.x86_64 \
   libSM-devel-1.2.3-1.el8.x86_64 \
   libXt-devel-1.1.5-12.el8.x86_64 \
   platform-python-devel-3.6.8-45.el8.x86_64 \
   python3-rpm-generators-5-7.el8.noarch \
   python36-devel-3.6.8-38.module+el8.5.0+12207+5c5719bc.x86_64 \
   poppler-cpp-20.11.0-4.el8.x86_64 \
   poppler-devel-20.11.0-4.el8.x86_64 \
   poppler-cpp-devel-20.11.0-4.el8.x86_64 \
   blas-devel-3.8.0-8.el8.x86_64 \
   lapack-devel-3.8.0-8.el8.x86_64 \
&& mkdir /source && cd /source \
&& curl -O https://cfhcable.dl.sourceforge.net/project/mcmc-jags/JAGS/4.x/Source/JAGS-4.3.1.tar.gz \
&& curl -O https://download.oracle.com/otn_software/linux/instantclient/216000/oracle-instantclient-basic-21.6.0.0.0-1.el8.x86_64.rpm \
&& curl -O https://download.oracle.com/otn_software/linux/instantclient/216000/oracle-instantclient-devel-21.6.0.0.0-1.el8.x86_64.rpm \
&& curl -O https://dl.fedoraproject.org/pub/archive/epel/6/x86_64/Packages/g/ggobi-2.1.7-3.el6.x86_64.rpm \
&& curl -O https://dl.fedoraproject.org/pub/archive/epel/6/x86_64/Packages/g/ggobi-devel-2.1.7-3.el6.x86_64.rpm \
&& dnf install -y oracle-instantclient-basic-21.6.0.0.0-1.el8.x86_64.rpm oracle-instantclient-devel-21.6.0.0.0-1.el8.x86_64.rpm ggobi-2.1.7-3.el6.x86_64.rpm ggobi-devel-2.1.7-3.el6.x86_64.rpm \
&& tar -xf JAGS-4.3.1.tar.gz && cd JAGS-4.3.1 && ./configure && make && make install \
&& cd / && rm -rf /source \
&& dnf clean all 

ENV JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.332.b09-2.el8_6.x86_64/jre/
ENV LD_LIBRARY_PATH=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.332.b09-2.el8_6.x86_64/jre/lib/amd64:/usr/lib/openmpi
ENV OCI_LIB=/usr/lib/oracle/21/client64/lib
ENV OCI_INC=/usr/include/oracle/21/client64
ENV SNAKECHARMR_PYTHON_VERSION=3
ENV R_JAVA_LD_LIBRARY_PATH=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.332.b09-2.el8_6.x86_64/jre/lib/amd64

ARG R_VERSION=4.1.1
RUN echo "Installing R-4.1.1 Base..." && \
    curl -O https://cdn.rstudio.com/r/centos-8/pkgs/R-${R_VERSION}-1-1.x86_64.rpm && \
    dnf install -y R-${R_VERSION}-1-1.x86_64.rpm  dos2unix && \
    dnf clean all && \
    rm -rf R-${R_VERSION}-1-1.x86_64.rpm &&\
    ln -s /opt/R/${R_VERSION}/bin/R /usr/local/bin/R && \
    ln -s /opt/R/${R_VERSION}/bin/Rscript /usr/local/bin/Rscript

COPY Makevars /opt/R/${R_VERSION}/lib/R/etc/Makevars
COPY Makevars /opt/R/${R_VERSION}/lib64/R/etc/Makevars

COPY Renviron /opt/R/${R_VERSION}/lib/R/etc/Renviron
COPY Renviron /opt/R/${R_VERSION}/lib64/R/etc/Renviron

ARG RPACKAGE_REPO=https://packagemanager.rstudio.com/all/latest

ARG R_VERSION=4.1.1

ENV DISPLAY=10

ENV NOAWT=1

RUN echo 'options(repos = c(RSPM = "https://packagemanager.rstudio.com/"))' >> /opt/R/${R_VERSION}/lib/R/etc/Rprofile.site
RUN dos2unix /opt/R/${R_VERSION}/lib/R/etc/Makevars /opt/R/${R_VERSION}/lib64/R/etc/Makevars /opt/R/${R_VERSION}/lib64/R/etc/Renviron /opt/R/${R_VERSION}/lib/R/etc/Renviron
RUN R CMD javareconf \
       && mkdir /root/.R && echo -e "CXX14=g++ -std=c++1y -O3 -Wno-unused-variable -Wno-unused-function -Wno-builtin-macro-redefined -fPIC\nCXX14FLAGS=-O3 -march=core-avx-i -Wno-unused-variable -Wno-unused-function -Wno-builtin-macro-redefined\nCFLAGS=-O3 -march=core-avx-i -Wno-unused-variable -Wno-unused-function -Wno-builtin-macro-redefined" >> /root/.R/Makevars

# Installing Packages

RUN Rscript -e "install.packages('https://packagemanager.rstudio.com/all/latest/BH_1.66.0-1.tar.gz')"
RUN Rscript -e "install.packages('shinyMixR', repos = '${RPACKAGE_REPO}' , dependencies = TRUE)"
COPY Packages.csv /sources/Packages.csv

RUN Rscript -e "install.packages(scan('file:///sources/Packages.csv', what='character'), repos = '${RPACKAGE_REPO}' , dependencies = TRUE)"

#Installing Rmpi and doMPI
RUN Rscript -e "install.packages('Rmpi', configure.args=c('--with-Rmpi-libpath=/usr/lib64/openmpi/lib','--with-Rmpi-type=OPENMPI','--with-Rmpi-include=/usr/include/openmpi-x86_64'),repos = '${RPACKAGE_REPO}')"
RUN Rscript -e "install.packages('doMPI',repos = '${RPACKAGE_REPO}')"

# Remove Compiler C FLAGS to install Rgraphviz,,gRbase,gRain
RUN mv /root/.R/Makevars /root/.R/Makevars_bkp \
&& Rscript -e "install.packages('Rgraphviz', repos = '${RPACKAGE_REPO}' , dependencies = TRUE)" \
&& Rscript -e "install.packages('gRbase', repos = '${RPACKAGE_REPO}' , dependencies = TRUE)" \
&& Rscript -e "install.packages('gRain', repos = '${RPACKAGE_REPO}' , dependencies = TRUE)" \
&& mv /root/.R/Makevars_bkp /root/.R/Makevars

# create symlink for R4 required in testing framework
RUN ln -s /opt/R/${R_VERSION}/bin/R /usr/local/bin/R-4.1.1

# setting up the environment variable so that all users can access this makevars file
ENV R_MAKEVARS_SITE=/opt/R/${R_VERSION}/lib/R/etc/Makevars

# Remove Package files
RUN rm -rf /sources
